<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jun.plugin.biz.model.SysUserDao">

    <resultMap id="SysUser" type="com.jun.plugin.biz.model.SysUser" >
        <result column="id" property="id" />
        <result column="username" property="username" />
        <result column="salt" property="salt" />
        <result column="password" property="password" />
        <result column="phone" property="phone" />
        <result column="dept_id" property="depid" />
        <result column="real_name" property="realName" />
        <result column="nick_name" property="nickName" />
        <result column="email" property="email" />
        <result column="status" property="status" />
        <result column="sex" property="sex" />
        <result column="deleted" property="deleted" />
        <result column="create_id" property="createId" />
        <result column="update_id" property="updateId" />
        <result column="create_where" property="createWhere" />
        <result column="create_time" property="createTime" />
        <result column="update_time" property="updateTime" />
    </resultMap>

    <sql id="Base_Column_List">
        `id`,
        `username`,
        `salt`,
        `password`,
        `phone`,
        `dept_id`,
        `real_name`,
        `nick_name`,
        `email`,
        `status`,
        `sex`,
        `deleted`,
        `create_id`,
        `update_id`,
        `create_where`,
        `create_time`,
        `update_time`
    </sql>

    <insert id="insert" parameterType="java.util.Map" >
        INSERT INTO sys_user (
            `id`,
            `username`,
            `salt`,
            `password`,
            `phone`,
            `dept_id`,
            `real_name`,
            `nick_name`,
            `email`,
            `status`,
            `sex`,
            `deleted`,
            `create_id`,
            `update_id`,
            `create_where`,
            `create_time`,
            `update_time`
        )
        VALUES(
            #{sysUser.id},
            #{sysUser.username},
            #{sysUser.salt},
            #{sysUser.password},
            #{sysUser.phone},
            #{sysUser.depid},
            #{sysUser.realName},
            #{sysUser.nickName},
            #{sysUser.email},
            #{sysUser.status},
            #{sysUser.sex},
            #{sysUser.deleted},
            #{sysUser.createId},
            #{sysUser.updateId},
            #{sysUser.createWhere},
            #{sysUser.createTime},
            #{sysUser.updateTime}
        )
    </insert>

    <delete id="delete" parameterType="java.util.Map" >
        DELETE FROM sys_user
        WHERE `id` = #{id}
    </delete>

    <update id="update" parameterType="java.util.Map" >
        UPDATE sys_user
        SET
            id = #{sysUser.id},
            username = #{sysUser.username},
            salt = #{sysUser.salt},
            password = #{sysUser.password},
            phone = #{sysUser.phone},
            dept_id = #{sysUser.depid},
            real_name = #{sysUser.realName},
            nick_name = #{sysUser.nickName},
            email = #{sysUser.email},
            status = #{sysUser.status},
            sex = #{sysUser.sex},
            deleted = #{sysUser.deleted},
            create_id = #{sysUser.createId},
            update_id = #{sysUser.updateId},
            create_where = #{sysUser.createWhere},
            create_time = #{sysUser.createTime},
            update_time = #{sysUser.updateTime},
            UpdateTime = NOW()
        WHERE `id` = #{sysUser.id}
    </update>


    <select id="load" parameterType="java.util.Map" resultMap="SysUser">
        SELECT <include refid="Base_Column_List" />
        FROM sys_user
        WHERE `id` = #{id}
    </select>

    <select id="pageList" parameterType="java.util.Map" resultMap="SysUser">
        SELECT <include refid="Base_Column_List" />
        FROM sys_user
        LIMIT #{offset}, #{pagesize}
    </select>

    <select id="pageListCount" parameterType="java.util.Map" resultType="int">
        SELECT count(1)
        FROM sys_user
    </select>

</mapper>
